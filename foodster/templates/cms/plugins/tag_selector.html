{% load i18n %}

<div class="tag-selector-plugin tag-list d-flex flex-wrap gap-2 pb-3">

    {% if cafe_tags %}
        {% for item in cafe_tags %}
            {% if item.url %}
                <a href="{{ item.url }}"
                   class="tag tag-cafe badge text-bg-danger text-decoration-none"
                   title="{{ item.tag.name }}"
                   style="font-weight: 400; padding: 0.5em 0.75em;">
                    {{ item.tag.name }}
                    {% if show_count %}
                        <span class="tag-count ms-1">{{ item.tag.taggit_taggeditem_items.count }}</span>
                    {% endif %}
                </a>
            {% else %}
                <span class="tag tag-cafe badge text-bg-danger opacity-50"
                      title="{{ item.tag.name }}"
                      style="font-weight: 400; padding: 0.5em 0.75em; cursor: not-allowed;">
                    {{ item.tag.name }}
                    {% if show_count %}
                        <span class="tag-count ms-1">{{ item.tag.taggit_taggeditem_items.count }}</span>
                    {% endif %}
                </span>
            {% endif %}
        {% endfor %}
    {% endif %}

    {% if dish_tags %}
        {% for item in dish_tags %}
            {% if item.url %}
                <a href="{{ item.url }}"
                   class="tag tag-dish badge text-bg-success text-decoration-none"
                   title="{{ item.tag.name }}"
                   style="font-weight: 400; padding: 0.5em 0.75em;">
                    {{ item.tag.name }}
                    {% if show_count %}
                        <span class="tag-count ms-1">{{ item.tag.taggit_taggeditem_items.count }}</span>
                    {% endif %}
                </a>
            {% else %}
                <span class="tag tag-dish badge text-bg-success opacity-50"
                      title="{{ item.tag.name }}"
                      style="font-weight: 400; padding: 0.5em 0.75em; cursor: not-allowed;">
                    {{ item.tag.name }}
                    {% if show_count %}
                        <span class="tag-count ms-1">{{ item.tag.taggit_taggeditem_items.count }}</span>
                    {% endif %}
                </span>
            {% endif %}
        {% endfor %}
    {% endif %}

    {% if category_tags %}
        {% for item in category_tags %}
            <span class="tag tag-category badge text-bg-info"
                  title="{{ item.tag.name }}"
                  style="font-weight: 400; padding: 0.5em 0.75em;">
                {{ item.tag.name }}
                {% if show_count %}
                    <span class="tag-count ms-1">{{ item.tag.taggit_taggeditem_items.count }}</span>
                {% endif %}
            </span>
        {% endfor %}
    {% endif %}

    {% if not cafe_tags and not dish_tags and not category_tags %}
        <p class="text-muted text-center mb-0">{% trans "No tags available" %}</p>
    {% endif %}

</div>

<style>
/* Минимальные кастомные стили - только для hover-эффектов */
.tag-selector-plugin .tag:hover {
    transform: translateY(-2px);
    transition: all 0.2s ease;
    filter: brightness(0.9);
}

.tag-selector-plugin .tag.disabled:hover {
    transform: none;
    filter: none;
}

.tag-count {
    font-size: 0.75em;
    opacity: 0.9;
}
</style>